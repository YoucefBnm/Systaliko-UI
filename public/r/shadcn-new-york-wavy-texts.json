{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "shadcn-new-york-wavy-texts",
  "type": "registry:ui",
  "title": "Wavy Texts",
  "description": "Wavy texts wrap, animates collection of texts in wavy motion on scroll with shadcn-new-york style.",
  "files": [
    {
      "path": "__registry__/text/wavy-texts/shadcn-new-york/index.tsx",
      "content": "'use client';\nimport {\n  motion,\n  MotionValue,\n  SpringOptions,\n  useMotionValue,\n  useScroll,\n  useSpring,\n} from 'motion/react';\nimport {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nconst toRadian = (deg: number) => (deg * Math.PI) / 180;\n\ntype WavyTextsConfig = {\n  baseOffsetFactor: number;\n  baseExtra: number;\n  baseAmplitude: number;\n  lengthEffect: number;\n  frequency: number;\n  progressScale: number;\n  phaseShiftDeg: number;\n  spring: SpringOptions;\n};\n\nfunction WavyBlock({\n  text,\n  index,\n  scrollProgress,\n  maxLen,\n  config,\n}: {\n  text: string;\n  index: number;\n  scrollProgress: MotionValue<number>;\n  maxLen: number;\n  config: WavyTextsConfig;\n}) {\n  // compute length factor based on character count (0..1)\n  const lengthFactor = Math.min(1, Math.max(0, text.length / (maxLen || 1)));\n\n  // Track if component is mounted (client-side only)\n  const [isMounted, setIsMounted] = useState(false);\n\n  // Helper function to calculate X position from scroll progress\n  // Use consistent default width (1200) for SSR to avoid hydration mismatch\n  const calculateX = useCallback(\n    (p: number, windowWidth?: number) => {\n      // p is 0..1\n      const phase = config.progressScale * p; // like your `6 * progress`\n\n      // Use provided windowWidth, or default to 1200 for SSR consistency\n      const width =\n        windowWidth ??\n        (typeof window !== 'undefined' ? window.innerWidth : 1200);\n      const baseOffset = config.baseOffsetFactor * width + config.baseExtra;\n\n      // amplitude scaled by lengthFactor (shorter => larger amplitude)\n      const amplitudeScale = 1 - config.lengthEffect * lengthFactor; // 1 - 0.6*lenFactor in your earlier code\n      const amplitude = config.baseAmplitude * amplitudeScale;\n\n      const angle =\n        toRadian(config.frequency * index) +\n        phase +\n        toRadian(config.phaseShiftDeg);\n\n      return baseOffset + amplitude * Math.cos(angle);\n    },\n    [config, lengthFactor, index],\n  );\n\n  // Get initial scroll progress\n  // Always use 0 for initial render to ensure SSR/client consistency\n  // The actual scroll position will be set in useLayoutEffect after mount\n  const initialProgress = 0;\n  const initialX = calculateX(initialProgress, 1200);\n\n  // create a motion value per title and wrap it with a spring for smoothing\n  const rawX = useMotionValue(initialX);\n  const x = useSpring(rawX, config.spring);\n\n  // Mark as mounted on client side\n  useLayoutEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  // Use useLayoutEffect to set position synchronously before paint\n  useLayoutEffect(() => {\n    if (!scrollProgress || !isMounted) return;\n\n    // Set initial position immediately (synchronously before paint)\n    // Now use actual window width since we're on client\n    const currentProgress = scrollProgress.get();\n    const windowWidth =\n      typeof window !== 'undefined' ? window.innerWidth : 1200;\n    const correctX = calculateX(currentProgress, windowWidth);\n    // Set immediately to prevent visual jump\n    rawX.set(correctX);\n  }, [scrollProgress, rawX, calculateX, isMounted]);\n\n  // Subscribe to scroll changes in regular effect\n  useEffect(() => {\n    if (!scrollProgress || !isMounted) return;\n\n    // subscribe to scroll progress changes\n    const unsub = scrollProgress.onChange((p) => {\n      const windowWidth =\n        typeof window !== 'undefined' ? window.innerWidth : 1200;\n      const newX = calculateX(p, windowWidth);\n      // set raw motion value (spring will smooth it)\n      rawX.set(newX);\n    });\n\n    return () => {\n      if (unsub) unsub();\n    };\n  }, [scrollProgress, rawX, calculateX, isMounted]);\n\n  return (\n    <motion.h2\n      className=\"text-[clamp(6rem,7.3vw,14rem)] font-bold leading-none tracking-tighter uppercase whitespace-nowrap\"\n      style={{ x }}\n      aria-label={text}\n      suppressHydrationWarning\n    >\n      {text}\n    </motion.h2>\n  );\n}\n\nexport function WavyTexts({\n  titles = [],\n  className = 'py-24',\n  config: userConfig = {},\n}: {\n  titles?: string[];\n  className?: string;\n  config?: Partial<WavyTextsConfig>;\n}) {\n  // sane defaults (tweakable)\n  const config = useMemo(() => {\n    return {\n      // baseOffsetFactor * window.innerWidth + baseExtra (mirrors your `.1 * window.innerWidth + 160`)\n      baseOffsetFactor: userConfig.baseOffsetFactor ?? 0.1,\n      baseExtra: userConfig.baseExtra ?? 160,\n\n      // base amplitude in px (you used 160 previously)\n      baseAmplitude: userConfig.baseAmplitude ?? 160,\n\n      // how strongly length reduces amplitude (0..1)\n      lengthEffect: userConfig.lengthEffect ?? 0.6,\n\n      // degrees between items (you used 35 * index)\n      frequency: userConfig.frequency ?? 35,\n\n      // how much progress affects phase (you used 6 * progress)\n      progressScale: userConfig.progressScale ?? 6,\n\n      // phase shift (you had -180 deg)\n      phaseShiftDeg: userConfig.phaseShiftDeg ?? -180,\n\n      // spring config used by Framer Motion\n      spring: userConfig.spring ?? { damping: 22, stiffness: 300 },\n    };\n  }, [userConfig]);\n\n  // compute the maximum character length among titles (used to normalize lengthFactor)\n  const maxLen = useMemo(() => {\n    if (!titles || titles.length === 0) return 1;\n    return Math.max(...titles.map((t) => (t ? String(t).length : 0)));\n  }, [titles]);\n\n  // container ref and scroll progress (scoped to container)\n  const containerRef = useRef<HTMLElement>(null);\n  const { scrollYProgress } = useScroll({\n    target: containerRef,\n    offset: ['start end', 'end start'],\n  });\n\n  return (\n    <section ref={containerRef} className={className}>\n      <div className=\"max-w-6xl mx-auto px-6\">\n        <div className=\"flex flex-col gap-6\">\n          {titles.map((t, i) => (\n            <WavyBlock\n              key={i}\n              text={t}\n              index={i}\n              scrollProgress={scrollYProgress}\n              maxLen={maxLen}\n              config={config}\n            />\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n",
      "type": "registry:ui",
      "target": "components/systaliko-ui/text/wavy-texts.tsx"
    }
  ]
}